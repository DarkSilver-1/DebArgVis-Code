<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style>
        body {
            background-color: darkcyan;
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
        }
    </style>
</head>
<body>
<div style="background-color: antiquewhite;">
    <svg width="500" height="300" xmlns="http://www.w3.org/2000/svg" id="svg">
    </svg>

</div>

<script>
    textArray = ["This is the very first line", "This is the first line", "NNNNNNNNN text that needs to be split into multiple lines it is really long believe me it doesnt fit no no it does not stop asking and trying!!!! kdg djndjfngkdjfbnkfdjcb nkfdjb kdfjbkjfdnbk idgnkdjngfdjng ", "This is the third line"]
    let text = document.getElementById("svg");
    let end = 400
    let maxNumOfLetters = 60 //determine using getComputedTextLength()
    let previousTspan = null
    let previousX = 10;
    let count = 1
    textArray.forEach(function (tspan) {
            let prevCut = 0
            let finished = false
            if (tspan.length > maxNumOfLetters) {
                let newText = document.createElementNS("http://www.w3.org/2000/svg", "text");
                text.appendChild(newText)

                let prevTextLen = previousTspan.innerHTML.length
                let lineLength = prevTextLen
                prevCut = 0

                while (!finished) {
                    let tspanTextPart = tspan.substring(prevCut, Math.min(prevCut + maxNumOfLetters - lineLength, tspan.length))
                    prevCut = Math.min(prevCut + maxNumOfLetters - lineLength, tspan.length)
                    prevTextLen = tspanTextPart.length
                    let tspanPart = document.createElementNS("http://www.w3.org/2000/svg", "tspan");
                    tspanPart.textContent = tspanTextPart
                    newText.appendChild(tspanPart)
                    if (tspanPart.getComputedTextLength() + previousX > end + 20) {
                        previousX = 10
                        tspanPart.setAttribute('dy', "1.2em")
                    }
                    if (lineLength += tspanTextPart.length === maxNumOfLetters) {
                        lineLength = 0
                    } else {
                        lineLength += tspanTextPart.length
                    }
                    tspanPart.setAttribute('x', previousX);
                    previousX += tspanPart.getComputedTextLength()
                    previousTspan = tspanPart
                    if(prevCut === tspan.length){
                        finished = true
                    }
                    count++
                }
            } else {

                let tspanPart = document.createElementNS("http://www.w3.org/2000/svg", "text");
                tspanPart.textContent = tspan
                text.appendChild(tspanPart)
                if (tspanPart.getComputedTextLength() + previousX > end) {
                    previousX = 10
                    tspanPart.setAttribute('dy', "1.2em")
                    count = 1
                }
                tspanPart.setAttribute('x', previousX);
                previousX += tspanPart.getComputedTextLength()
                console.log("First prev x", previousX)
                previousTspan = tspanPart
            }
        }
    )
    ;

    var verticalLine = document.createElementNS("http://www.w3.org/2000/svg", "line");
    verticalLine.setAttribute('x1', end);
    verticalLine.setAttribute('y1', 0);
    verticalLine.setAttribute('x2', end);
    verticalLine.setAttribute('y2', end);
    verticalLine.setAttribute('stroke', 'black');
    verticalLine.setAttribute('stroke-width', '2');
    document.getElementById('svg').appendChild(verticalLine);

</script>

</body>
</html>