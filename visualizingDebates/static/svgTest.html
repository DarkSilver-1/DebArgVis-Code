<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style>
        body {
            background-color: darkcyan;
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
        }
    </style>
</head>
<body>
<div style="background-color: antiquewhite;">
    <svg width="500" height="300" xmlns="http://www.w3.org/2000/svg" id="svg">
    </svg>

</div>

<script>
    textArray = ["This is the very first line", "This is the first line", "NNNNN NNNNNNNNNNNNNNNNNNN text that needs to be split into multiple lines it is really long believe me it doesnt fit no no it does not stop asking and trying!!!! kdg djndjfngkdjfbnkfdjcb nkfdjb kdfjbkjfdnbk idgnkdjngfdjng ", "This is the third line"]
    let text = document.getElementById("svg");
    let maxNumOfLetters = 60 //determine using getComputedTextLength()
    let previousX = 10;
    let yValue = 1.2
    let numberOfCharsInLine = 0;
    textArray.forEach(function (tspan) {
            let prevCutIndex = 0
            let finished = false
            let newText = document.createElementNS("http://www.w3.org/2000/svg", "text");

            if (numberOfCharsInLine + tspan.length > maxNumOfLetters) {
                text.appendChild(newText)
                newText.setAttribute('y', yValue + "em")
                prevCutIndex = 0
                let firstCut = true
                while (!finished) {
                    let lastCutIndex = Math.min(prevCutIndex + maxNumOfLetters - numberOfCharsInLine, tspan.length)
                    let tspanTextPart = tspan.substring(prevCutIndex, lastCutIndex)
                    if (tspan.length - prevCutIndex > maxNumOfLetters - numberOfCharsInLine) {
                        let lastWhitespace = tspanTextPart.lastIndexOf(' ');
                        if (lastWhitespace !== -1) {
                            tspanTextPart = tspanTextPart.substring(0, lastWhitespace)
                            prevCutIndex += lastWhitespace
                            numberOfCharsInLine = maxNumOfLetters
                        } else {
                            tspanTextPart = ""
                            numberOfCharsInLine = maxNumOfLetters
                        }
                    } else {
                        prevCutIndex = lastCutIndex
                        numberOfCharsInLine += tspanTextPart.length
                    }
                    let tspanPart = document.createElementNS("http://www.w3.org/2000/svg", "tspan");
                    tspanPart.textContent = tspanTextPart
                    newText.appendChild(tspanPart)
                    if (!firstCut && tspanTextPart !== "") {
                        previousX = 10
                        tspanPart.setAttribute('dy', "1.2em")
                        yValue += 1.2
                    }
                    if (numberOfCharsInLine >= maxNumOfLetters) {
                        numberOfCharsInLine -= maxNumOfLetters
                    }
                    tspanPart.setAttribute('x', previousX);
                    previousX += tspanPart.getComputedTextLength()
                    finished = prevCutIndex === tspan.length
                    firstCut = false
                }
            } else {
                newText.textContent = tspan
                text.appendChild(newText)
                newText.setAttribute('y', yValue + "em")
                newText.setAttribute('x', previousX);
                numberOfCharsInLine += tspan.length
                previousX += newText.getComputedTextLength()
            }

        }
    )


    let end = 400
    var verticalLine = document.createElementNS("http://www.w3.org/2000/svg", "line");
    verticalLine.setAttribute('x1', end);
    verticalLine.setAttribute('y1', 0);
    verticalLine.setAttribute('x2', end);
    verticalLine.setAttribute('y2', end);
    verticalLine.setAttribute('stroke', 'black');
    verticalLine.setAttribute('stroke-width', '2');
    document.getElementById('svg').appendChild(verticalLine);

</script>

</body>
</html>